@{
    ViewData["Title"] = "Home Page";
}

<script>
    var updateTable = function () {
        $.ajax({
            type: 'get',
            url: 'http://localhost:14183/api/checkIns',
            success: function (result) {
                var tbody = $("#checkInList > tbody");
                tbody.html(null);
                result.forEach(function (checkIn) {
                    tbody.append("<tr><td>" + checkIn.personFullName + "</td><td>" + checkIn.personSex + "</td><td>" + checkIn.personBirthDate + "</td><td>" + checkIn.checkInVisitDateTime + "</td></tr>");
                });
            }
        });
    }

    var addVisitor = function() {
        $.ajax({
            url: "http://localhost:14183/api/checkIns",
            type: "POST",
            data: {
                Visitor: $("#visitorFullName").val(),
                Sex: $("input:radio[name='visitorSex']:checked").val()
            },
            success: function() {
                updateTable();
            }
        });
    }
</script>

<div class="row">
    <div class="col-md-12">
        <div>
            <p>Данные посетителя</p>
            <div class="form-group">
                <label>ФИО</label>
                <input type="text" id="visitorFullName" class="form-control"/>
            </div>
            <div class="form-group">
                <label>Пол</label>
                <label class="radio-inline">
                    <input type="radio" name="visitorSex" value="1" /> Мужской
                </label>
                <label class="radio-inline">
                    <input type="radio" name="visitorSex" value="2" /> Женский
                </label>
            </div>
            <button type="button" class="btn btn-default" onclick="addVisitor();">Добавить</button>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <table id="checkInList" class="table table-bordered">
            <thead>
            <tr>
                <th>ФИО</th>
                <th>Пол</th>
                <th>Дата рождения</th>
                <th>Время прихода</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>

<script>
    $(document).ready(function () {
        updateTable();
    });
</script>